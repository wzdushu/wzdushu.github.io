<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage data-theme=light><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Introduction to Terraform, an automated orchestration tool - 丸子有记
</title><link rel=alternate hreflang=zh-cn href=/zh-cn/post/devops-terraform-about/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=color-scheme content="light dark"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=author content="wanzi"><meta name=description content="Introduction to Terraform, an automated orchestration tool"><meta name=keywords content="丸子有记,运维,devops,sre,运维架构,运维开发,golang,python,rust"><meta name=generator content="Hugo 0.121.0"><link rel=canonical href=/post/devops-terraform-about/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/style.min.4d9e22c6c4a4cfe9ca1e35f9578ca6c8ff84c408a5f0599c8cbdaf444e95eae8.css integrity="sha256-TZ4ixsSkz+nKHjX5V4ymyP+ExAil8FmcjL2vRE6V6ug=" media=screen crossorigin=anonymous><meta property="og:title" content="Introduction to Terraform, an automated orchestration tool"><meta property="og:description" content="Introduction to Terraform, an automated orchestration tool"><meta property="og:type" content="article"><meta property="og:url" content="/post/devops-terraform-about/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-02-24T17:22:42+08:00"><meta property="article:modified_time" content="2021-02-24T17:22:42+08:00"><meta itemprop=name content="Introduction to Terraform, an automated orchestration tool"><meta itemprop=description content="Introduction to Terraform, an automated orchestration tool"><meta itemprop=datePublished content="2021-02-24T17:22:42+08:00"><meta itemprop=dateModified content="2021-02-24T17:22:42+08:00"><meta itemprop=wordCount content="1509"><meta itemprop=keywords content="terraform,aliyun,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Introduction to Terraform, an automated orchestration tool"><meta name=twitter:description content="Introduction to Terraform, an automated orchestration tool"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script>(function(){var e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)})()</script></head><body><div id=back-to-top></div><header><div class=desktop-header><div class=desktop-header-logo><a href=/ class=logo>丸子有记</a></div><nav class=desktop-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li><li class=menu-item><a class="menu-item-link menu-parent menu-item-lang" href=#><svg aria-hidden="true" class="lucide lucide-languages hi-svg-inline icon--languages" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>English</a><ul class=submenu><li class=submenu-item><a href=/zh-cn/>中文</a></li></ul></li><li class=menu-item><a id=openSearch class="menu-item-link menu-item-search" href=#><svg aria-hidden="true" class="lucide lucide-search hi-svg-inline icon--search" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg></a></li><li class=menu-item><a class="theme-toggle menu-item-link" href=javascript:void(0);><svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg><svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></a></li><li class=menu-item><a class=menu-item-link href=/index.xml rel="noopener alternate" type=application/rss+xml title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></li></ul></nav></div><div class=mobile-header><div id=mobile-navbar class=mobile-navbar><div id=mobile-navbar-icon class=mobile-navbar-icon><svg aria-hidden="true" class="lucide lucide-menu hi-svg-inline icon--menu" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg></div><div class=mobile-navbar-logo><a href=/%20/ class=logo>丸子有记</a></div></div><div id=mobile-menu-close-modal class=mobile-menu-close-modal></div><nav id=mobile-menu class=mobile-menu><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=/>Home</a></li><li class=mobile-menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=mobile-menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=mobile-menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=mobile-menu-item><a class=menu-item-link href=/about/>About</a></li><li class=mobile-menu-item><div class="mobile-menu-parent mobile-menu-item-lang"><span class=mobile-submenu-open></span>
<a href=#><svg aria-hidden="true" class="lucide lucide-languages hi-svg-inline icon--languages" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>English
Language</a></div><ul class=mobile-submenu-list><li><a href=/><strong>English</strong></a></li><li><a href=/zh-cn/>中文</a></li></ul></li><li class=mobile-menu-item><a id=openSearchMobile class="mobile-menu-item-link menu-item-search" href=#><svg aria-hidden="true" class="lucide lucide-search hi-svg-inline icon--search" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg></a></li><li class=mobile-menu-item><a class="theme-toggle menu-item-link" href=javascript:void(0);><svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg><svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 009 9 9 9 0 11-9-9z"/></svg></a></li><li class=mobile-menu-item><a class=menu-item-link href=/index.xml rel="noopener alternate" type=application/rss+xml title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></li></ul></nav></div></header><main id=main class="main pico container"><div class=content-wrapper><aside class=sidebar></aside><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Introduction to Terraform, an automated orchestration tool</h1><div class=post-title-i18n><svg aria-hidden="true" class="lucide lucide-languages hi-svg-inline icon--languages" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg><div><a href=/zh-cn/post/devops-terraform-about/>zh-cn</a></div></div><div class=post-meta-list><div class="post-meta-item post-meta-author"><svg aria-hidden="true" class="lucide lucide-user-round-pen hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 21a8 8 0 0110.821-7.487"/><path d="M21.378 16.626a1 1 0 00-3.004-3.004l-4.01 4.012a2 2 0 00-.506.854l-.837 2.87a.5.5.0 00.62.62l2.87-.837a2 2 0 00.854-.506z"/><circle cx="10" cy="8" r="5"/></svg><a href=/about><span class=post-meta-author-name>wanzi</span></a></div><div class="post-meta-item post-meta-time"><svg aria-hidden="true" class="lucide lucide-calendar-days hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg><time datetime=2021-02-24>2021-02-24</time></div><div class=post-meta__right><span class=post-meta-more>1509 words -
4 min read
- <span class=remark42__counter data-url=/post/devops-terraform-about/></span> Comments</span><div class="post-meta-item post-meta-category"><a href=/categories/devops/>devops</a></div></div></div></header><div class=post-content><h2 id=what-is-terraform->What is Terraform? ：</h2><p>Terraform is an open source resource orchestration tool launched by HashiCorp around 2014. Currently, almost all mainstream cloud service providers support Terraform, including Alibaba Cloud, Tencent Cloud, Huawei Cloud, AWS, Azure, Baidu Cloud, etc. Many companies currently build their own infrastructure based on terraform.</p><blockquote><p>Background:
In the traditional operation and maintenance model, the launch of a business requires preparation stages such as equipment procurement, machine installation, network environment construction, and system installation. With the rise of cloud computing, major public cloud vendors have provided very friendly interactive interfaces. Users can use a browser to purchase various cloud resources on demand and quickly build a business architecture. However, with the continuous expansion of business architecture, the scale and types of cloud resource procurement are also increasing. When users need to quickly purchase a large number of different types of cloud resources, the large number of interactive operations between cloud management pages actually reduces the efficiency of cloud resource procurement. It takes about 20 minutes or even longer to initialize a classic VPC network architecture on the Alibaba Cloud console, from creating VPC, switch VSwitch to creating NAT gateway, elastic IP, and then configuring routing. At the same time, the non-replicability of work results leads to repeated work in cross-region and cross-cloud platform scenarios.</p></blockquote><p>In fact, for business operation and maintenance personnel, they only care about the configuration of resources, not the steps to create these resources. Just like drinking coffee, you only need to tell the waiter what to drink and whether to add ice. If there is a complete cloud resource procurement list, this list clearly records the types, specifications, quantities and relationships between the cloud resources to be purchased, and then completes the purchase with one click, and when business needs change, you only need to change the list to quickly change cloud resources, then the efficiency will be greatly improved. In cloud computing, this is called resource orchestration. At present, many cloud platforms also provide resource orchestration capabilities, such as Alibaba Cloud&rsquo;s ROS and AWS&rsquo;s CloudFormation.</p><blockquote><p>Define cloud resources, services or operation steps in the form of code in the template, and use the orchestration engine to realize the automated management of resources. This is Infrastructure as Code (IaC for short), which is also the most efficient implementation mode of resource orchestration.
However, multiple cloud orchestration services bring high learning costs, inefficient code reuse, and complex multi-cloud collaborative workflows. Each service is limited to managing its own single cloud platform, and cannot meet the unified management of multiple cloud platforms and multiple levels (such as IaaS, PaaS) resources. How to solve the above problems? Can we use a unified orchestration tool and a common set of syntax to achieve unified management of multiple clouds including Alibaba Cloud? So Terraform was born at this time to solve these problems.</p></blockquote><h2 id=terrafrom-functions-and-roles>Terrafrom functions and roles:</h2><h3 id=functional-points>Functional points</h3><ul><li>IaC: infrastructure as code, use code to manage infrastructure</li><li>Execution plan: display the operations performed when terraform apply</li><li>Resource graph: build a graph of all resources</li><li>Change automation: based on the execution plan and resource graph, you can clearly know the content and order to change
Summary: Terraform is used for initialization of various infrastructure resources, supports multiple cloud platforms, and supports third-party service docking</li></ul><h3 id=role>Role</h3><ul><li>Use APIs from different providers and package them into Terraform&rsquo;s standard code structure</li><li>Users do not need to understand the API details of each cloud computing vendor, which reduces the difficulty of deployment</li></ul><h2 id=terraform-architecture>Terraform architecture</h2><p>Terraform itself is a plug-in-based architecture with strong scalability, which can facilitate programmers to expand Terraform. Terraform can be logically divided into two layers, the core layer (Terraform Core) and the plug-in layer (Terraform Provider).</p><h3 id=core-layer>Core layer</h3><p>The core layer is actually the command line tool of terraform. It is developed in go language and is responsible for:</p><ol><li>Read .tf configuration and replace variables</li><li>Resource status file management</li><li>Analyze resource relationships and draw maps</li><li>Dependency map and create resources
Create resources according to dependencies; for resources without dependencies, they will be created in parallel (default 10 parallel processes), which is why Terraform can manage cloud resources efficiently and quickly.</li><li>Call the plug-in layer with RPC</li></ol><h3 id=plug-in-layer>Plug-in layer</h3><p>The plug-in layer is also developed in go language. Terraform has more than 250 different plug-ins, which are responsible for:</p><ul><li>Accept RPC calls from the core layer</li><li>Provide the execution of a specific service</li></ul><p>There are two types of plug-in layers:</p><h4 id=provider>Provider</h4><p>Provider is responsible for integration with external APIs. For example, Alibaba Cloud Provider provides the function of creating, modifying, and deleting cloud resources in Alibaba Cloud. This plug-in is responsible for interacting with the interface of Alibaba Cloud API and providing a layer of abstraction so that programmers can orchestrate resources through terraform without understanding the details of the API. It is responsible for:</p><ul><li>Initialization and external API communication</li><li>External API authentication</li><li>Defining the relationship between cloud resources and external services</li></ul><p>For example, common providers:</p><div class=highlight-container><button class="copy-code-btn outline">Copy</button><div class=highlight><div style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-8>8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-9>9</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Alibaba Cloud: https://github.com/aliyun/terraform-provider-alicloud
</span></span><span style=display:flex><span>Baidu Cloud: https://github.com/baidubce/terraform-provider-baiducloud
</span></span><span style=display:flex><span>Tencent Cloud: https://github.com/tencentcloudstack/terraform-provider-tencentcloud
</span></span><span style=display:flex><span>Huawei Cloud: https://github.com/huaweicloud/terraform-provider-huaweicloud
</span></span><span style=display:flex><span>ucloud: https://github.com/ucloud/terraform-provider-ucloud
</span></span><span style=display:flex><span>qingcloud: https://github.com/yunify/terraform-provider-qingcloud
</span></span><span style=display:flex><span>AWS: https://github.com/hashicorp/terraform-provider-aws
</span></span><span style=display:flex><span>Azure: https://github.com/terraform-providers/terraform-provider-azurerm
</span></span><span style=display:flex><span>GoogleCloud: https://github.com/hashicorp/terraform-provider-google</span></span></code></pre></td></tr></table></div></div></div><h4 id=provisioner>Provisioner</h4><p>Provisioner is responsible for executing some scripts after resource creation or deletion. For example, Puppet Provisioner can download, install, and configure Puppet agent on cloud virtual machine resources after they are created.</p><p>For easier understanding, I found a component architecture diagram on the Internet to briefly explain the location of each component:</p><p><img src=/images/2021/terraform-about.png alt="terraform architecture diagram"></p><p>For daily operations of terraform, I drew a basic workflow flowchart as follows:</p><p><img src=/images/2021/terraform-workflow.png alt="terraform operation flowchart"></p><h2 id=terraform-keyword-explanation>Terraform keyword explanation:</h2><h3 id=declarative-language-hcl>Declarative language (HCL):</h3><p>Terraform is written in HashiCorp Configuration Language. HCL is declarative, that is, programmers use HCL to describe what the entire infrastructure should look like, and then leave the specific implementation work to Terraform. Programmers do not need to understand the specific steps and details of the implementation, nor do they need to understand how terraform connects to the API of the cloud service provider. Terraform will automatically download the corresponding Provider and Provisioner based on the code to take charge of the specific steps and details. The corresponding to the declarative style is the imperative style. Imperative languages ​​are executed in steps, and the order is very important. Executing imperative languages ​​on fixed inputs will produce fixed outputs. There is no difference between declarative and imperative languages, but in the field of cloud resource orchestration, declarative languages ​​are easier to implement. The cloud resource orchestration tools we see in daily life are all declarative, including AWS CloudFormation, Azure Resource Template, and Google Cloud Deoplyment Manager. If you implement resource orchestration on Tencent Cloud by calling Tencent Cloud API, it is usually imperative.</p><h3 id=resource-state-file-state>Resource state file (state)</h3><p>After Terraform is initialized, a state file will be generated. The state file records the time of the most recent operation, the relevant attributes of each resource, the current value of each variable, the version of the state file, and so on.</p><p>The next time you operate, terraform will first update the current state file with the state on the cloud service provider to find out whether there are any resources that have been deleted or changed, and then decide which resources need to be deleted, updated, or created based on the .tf file. After the operation is completed, a state file will be regenerated.</p><h3 id=terraform-backend>Terraform backend</h3><p>The integrity of resource status files is more important. For these files, we need to at least automatically lock them at the beginning of the operation until the end of the operation, so that others cannot change them; in addition, we need to track resource version changes; and perform access control on sensitive information in resource files.</p><p>Therefore, backend is closely related to how resource status files are read, stored, and locked, and how terraform apply is executed.</p><p>Terraform uses the local backend by default, that is, the status files will be stored in the current directory, and the execution of terraform code is also run in the local virtual machine. This is no problem for cloud resources managed by one person, but when the number of team members increases, everyone may have their own workbench, but a common place is needed to store resource status files. This is when remote storage can be used. Currently, terraform supports a variety of remote storage backends, including AWS s3, Hashicorp Consul, etcd, Terraform Cloud, and terraform
Enterprise Edition, etc. These remote backends provide remote storage and locking of status files. Among them, terraform Enterprise Edition provides remote running of terraform, as well as some other enterprise-level features.</p><h3 id=terraform-module>Terraform module</h3><p>Terraform module is to write some highly reusable code into a module for others to use. The module consists of input parameters, output parameters and main logic. This is very similar to the function in traditional programming languages. Terraform provides a public module registry. After the module is written, as long as it meets the specifications, it can be published to the module registry for everyone to use. <a href=https://registry.terraform.io/>https://registry.terraform.io/</a></p></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>wanzi</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2021-02-24</span></p><p class=copyright-item><span class=item-title>License</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><div class=post-reward><input type=checkbox name=reward id=reward hidden>
<label class=reward-button for=reward>Reward</label><div class=qr-code></div></div><footer class=post-footer><div class=post-tags><a href=/tags/terraform/>terraform</a>
<a href=/tags/aliyun/>aliyun</a></div><nav class=post-nav><a class=prev href=/post/devops-terraform-command-detail/><i class=iconfont><svg aria-hidden="true" class="lucide lucide-chevron-left hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m15 18-6-6 6-6"/></svg></i><span class="prev-text nav-default">Detailed explanation of terraform installation and commands</span>
<span class="prev-text nav-mobile">Prev</span>
</a><a class=next href=/post/cicd-argocd-jenkins-pipeline/><span class="next-text nav-default">ArgoCD+Jenkins Pipeline Automated Application Deployment</span>
<span class="prev-text nav-mobile">Next</span>
<i class=iconfont><svg aria-hidden="true" class="lucide lucide-chevron-right hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m9 18 6-6-6-6"/></svg></i></a></nav></footer></article><div class=comment><script src=https://giscus.app/client.js data-repo=wzdushu/wzdushu.github.io data-repo-id=R_kgDONA8Shg data-category=General data-category-id=DIC_kwDONA8Shs4CjwIH data-mapping=pathname data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script></div><div id=remark42></div></div><nav class=toc id=toc><div class=toc-title>Table of Contents</div><div class="toc-content custom-scrollbar"><nav id=TableOfContents><ul><li><a href=#what-is-terraform->What is Terraform? ：</a></li><li><a href=#terrafrom-functions-and-roles>Terrafrom functions and roles:</a><ul><li><a href=#functional-points>Functional points</a></li><li><a href=#role>Role</a></li></ul></li><li><a href=#terraform-architecture>Terraform architecture</a><ul><li><a href=#core-layer>Core layer</a></li><li><a href=#plug-in-layer>Plug-in layer</a></li></ul></li><li><a href=#terraform-keyword-explanation>Terraform keyword explanation:</a><ul><li><a href=#declarative-language-hcl>Declarative language (HCL):</a></li><li><a href=#resource-state-file-state>Resource state file (state)</a></li><li><a href=#terraform-backend>Terraform backend</a></li><li><a href=#terraform-module>Terraform module</a></li></ul></li></ul></nav></div></nav></div></main><footer id=footer class=footer><div class=social-icon-links><a href rel="me noopener" class=social-icon-link title=github target=_blank><svg aria-hidden="true" class="icon hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg></a><a href=/index.xml rel="noopener alternate" type=application/rss+xml class=social-icon-link title=rss target=_blank><svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span><span class=division>|</span>
<span class=theme-info>Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span><span class=copyright-year>&copy;
2018 -
2024
<span class=heart><i class=iconfont><svg aria-hidden="true" class="lucide lucide-heart hi-svg-inline" fill="none" height="1em" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5.0 0016.5 3c-1.76.0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5.0 002 8.5c0 2.3 1.5 4.05 3 5.5l7 7z"/></svg></i></span><span class=author>丸子有记
</span></span><span><a href=https://www.foreverblog.cn/ target=_blank><img src=https://img.foreverblog.cn/logo_en_default.png alt style=width:auto;height:16px> </a>|<a href=https://beian.miit.gov.cn target=_blank>京ICP备2021004162号-1</a></span></div></footer><script type=text/javascript src=/js/main.e9535c2dd3b1d1ac40ed671376de7dddff0b15a6f9dcca3812b8e0dc2a0fca51.js integrity="sha256-6VNcLdOx0axA7WcTdt593f8LFab53Mo4Erjg3CoPylE=" crossorigin=anonymous></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script id=baidu_analytics>var _hmt=_hmt||[];(function(){if(window.location.hostname==="localhost")return;var t,e=document.createElement("script");e.async=!0,e.src="https://hm.baidu.com/hm.js?var _hmt = _hmt || [];(function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?9f80634ead11eb9ce00a6452d8891ed7"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script><script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script><script>var remark_config={host:"https://remark42.example.com",site_id:"remark",components:["embed","counter"]};!function(e,t){for(s=0;s<e.length;s++){var s,n=t.createElement("script"),o=".js",i=t.head||t.body;"noModule"in n?(n.type="module",o=".mjs"):n.async=!0,n.defer=!0,n.src=remark_config.host+"/web/"+e[s]+o,i.appendChild(n)}}(remark_config.components||["embed"],document)</script></body></html>